<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶ó‡¶≤‡ßç‡¶™‡ßá‡¶∞ ‡¶ù‡ßÅ‡ßú‡¶ø - ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ó‡¶≤‡ßç‡¶™ ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Arial, sans-serif; }
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; color: #333; }
        .navbar { background: white; box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000; }
        .nav-container { max-width: 1200px; margin: 0 auto; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 24px; font-weight: bold; color: #667eea; text-decoration: none; }
        .nav-links { display: flex; gap: 20px; align-items: center; }
        .nav-links a { text-decoration: none; color: #555; font-weight: 500; padding: 8px 15px; border-radius: 5px; transition: all 0.3s; }
        .nav-links a:hover { background: #667eea; color: white; }
        .menu-btn { display: none; background: none; border: none; font-size: 24px; cursor: pointer; }
        .hero { background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80'); background-size: cover; background-position: center; color: white; text-align: center; padding: 100px 20px; margin-top: 10px; }
        .hero-content h1 { font-size: 32px; margin-bottom: 20px; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }
        .hero-content p { font-size: 18px; margin-bottom: 30px; opacity: 0.9; }
        .hero-buttons { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
        .btn-primary { background: #667eea; color: white; padding: 12px 25px; border-radius: 50px; text-decoration: none; font-weight: bold; border: none; cursor: pointer; transition: all 0.3s; display: inline-block; }
        .btn-primary:hover { background: #5a67d8; transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .btn-secondary { background: transparent; color: white; padding: 12px 25px; border-radius: 50px; text-decoration: none; font-weight: bold; border: 2px solid white; cursor: pointer; transition: all 0.3s; display: inline-block; }
        .btn-secondary:hover { background: white; color: #667eea; }
        .btn-success { background: #28a745; color: white; padding: 12px 25px; border-radius: 50px; text-decoration: none; font-weight: bold; border: none; cursor: pointer; transition: all 0.3s; display: inline-block; }
        .btn-success:hover { background: #218838; transform: translateY(-2px); }
        .btn-google { background: white; color: #333; padding: 12px 25px; border-radius: 50px; text-decoration: none; font-weight: bold; border: 2px solid #ddd; cursor: pointer; transition: all 0.3s; display: inline-flex; align-items: center; justify-content: center; gap: 10px; }
        .btn-google:hover { background: #f8f9fa; border-color: #667eea; }
        .section { max-width: 1200px; margin: 30px auto; padding: 20px; background: white; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
        .section h2 { color: #667eea; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee; }
        .categories { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; }
        .category-btn { padding: 8px 15px; border: 2px solid #667eea; background: white; color: #667eea; border-radius: 25px; cursor: pointer; transition: all 0.3s; font-weight: 500; }
        .category-btn:hover { background: #667eea; color: white; }
        .category-btn.active { background: #667eea; color: white; }
        .stories-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .story-card { background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 3px 10px rgba(0,0,0,0.1); transition: transform 0.3s; border: 1px solid #eee; cursor: pointer; }
        .story-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.15); }
        .story-img { width: 100%; height: 150px; background: linear-gradient(45deg, #667eea, #764ba2); }
        .story-ghost { background: linear-gradient(45deg, #4a5568, #2d3748); }
        .story-content { padding: 15px; }
        .story-title { font-size: 18px; margin-bottom: 10px; color: #333; }
        .story-excerpt { color: #666; margin-bottom: 10px; line-height: 1.5; }
        .story-meta { display: flex; justify-content: space-between; color: #888; font-size: 13px; }
        footer { background: #333; color: white; margin-top: 40px; }
        .footer-content { max-width: 1200px; margin: 0 auto; padding: 30px 20px; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 30px; }
        .footer-section h3 { color: #667eea; margin-bottom: 15px; }
        .footer-section a { display: block; color: #ddd; text-decoration: none; margin-bottom: 8px; transition: color 0.3s; }
        .footer-section a:hover { color: #667eea; }
        .footer-bottom { text-align: center; padding: 15px; background: #222; color: #aaa; }
        .form-container { max-width: 500px; margin: 30px auto; padding: 20px; background: white; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 8px; color: #555; font-weight: 500; }
        .form-control { width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; }
        .form-control:focus { outline: none; border-color: #667eea; }
        textarea.form-control { min-height: 120px; resize: vertical; }
        .btn-load-more { display: block; margin: 20px auto; padding: 10px 25px; background: #667eea; color: white; border: none; border-radius: 25px; cursor: pointer; font-size: 16px; }
        @media (max-width: 768px) { .nav-links { display: none; flex-direction: column; position: absolute; top: 60px; left: 0; right: 0; background: white; padding: 20px; box-shadow: 0 5px 10px rgba(0,0,0,0.1); } .nav-links.active { display: flex; } .menu-btn { display: block; } .hero-content h1 { font-size: 24px; } .hero-content p { font-size: 16px; } .stories-grid { grid-template-columns: 1fr; } .form-container { margin: 15px; padding: 15px; } .payment-options { grid-template-columns: 1fr; } }
        .payment-box { background: #f8f9fa; border-radius: 10px; padding: 20px; margin: 15px 0; border-left: 5px solid #667eea; }
        .payment-info { background: white; padding: 15px; border-radius: 10px; margin-top: 15px; border: 2px dashed #667eea; }
        .warning { background: #fff3cd; color: #856404; padding: 12px; border-radius: 5px; margin: 12px 0; border: 1px solid #ffeaa7; }
        .success { background: #d4edda; color: #155724; padding: 12px; border-radius: 5px; margin: 12px 0; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; padding: 12px; border-radius: 5px; margin: 12px 0; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; padding: 12px; border-radius: 5px; margin: 12px 0; border: 1px solid #bee5eb; }
        .tags { display: flex; flex-wrap: wrap; gap: 5px; margin: 10px 0; }
        .tag { background: #e0e7ff; color: #667eea; padding: 4px 8px; border-radius: 15px; font-size: 12px; font-weight: 500; }
        .tag.ghost { background: #4a5568; color: white; }
        .page { display: none; }
        .page.active { display: block; }
        .admin-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 20px; }
        .stat-box { background: white; padding: 15px; border-radius: 10px; text-align: center; box-shadow: 0 3px 10px rgba(0,0,0,0.1); border-top: 4px solid #667eea; }
        .stat-number { font-size: 28px; font-weight: bold; color: #667eea; display: block; }
        .stat-label { color: #666; font-size: 13px; }
        .comment { background: #f8f9fa; padding: 12px; border-radius: 8px; margin-bottom: 8px; }
        .payment-options { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }
        .payment-method { background: white; border: 2px solid #e0e0e0; border-radius: 10px; padding: 15px; text-align: center; cursor: pointer; transition: all 0.3s; }
        .payment-method:hover { border-color: #667eea; transform: translateY(-3px); }
        .payment-method.active { border-color: #667eea; background: #f0f4ff; }
        .payment-icon { font-size: 30px; margin-bottom: 10px; }
        .payment-amount { font-size: 20px; font-weight: bold; color: #28a745; margin: 5px 0; }
        .hidden-number { background: #f8f9fa; padding: 8px; border-radius: 5px; font-family: monospace; letter-spacing: 2px; }
        .loader { border: 3px solid #f3f3f3; border-top: 3px solid #667eea; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin: 20px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .user-avatar { width: 40px; height: 40px; background: linear-gradient(45deg, #667eea, #764ba2); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin-right: 10px; }
        .user-info { display: flex; align-items: center; }
        .continue-reading { background: #f8f9fa; padding: 15px; border-radius: 10px; margin: 20px 0; border-left: 4px solid #28a745; }
        .bookmark-btn { background: transparent; border: 2px solid #ffc107; color: #ffc107; padding: 5px 10px; border-radius: 20px; cursor: pointer; transition: all 0.3s; }
        .bookmark-btn:hover { background: #ffc107; color: white; }
        .bookmark-btn.active { background: #ffc107; color: white; }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="#" class="logo" onclick="showPage('home')">üìñ ‡¶ó‡¶≤‡ßç‡¶™‡ßá‡¶∞ ‡¶ù‡ßÅ‡ßú‡¶ø</a>
            <div class="nav-links" id="navLinks">
                <a href="#" onclick="showPage('home')"><i class="fas fa-home"></i> ‡¶π‡ßã‡¶Æ</a>
                <a href="#" onclick="checkUserForWrite()"><i class="fas fa-pen"></i> ‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®</a>
                <a href="#" onclick="checkUser('profile')"><i class="fas fa-user"></i> ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</a>
                <a href="#" onclick="showPage('payment')"><i class="fas fa-credit-card"></i> ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ</a>
                <span id="authLinks"></span>
            </div>
            <button class="menu-btn" onclick="toggleMenu()">‚ò∞</button>
        </div>
    </nav>

    <!-- ‡¶π‡ßã‡¶Æ ‡¶™‡ßá‡¶ú -->
    <div id="home-page" class="page active">
        <section class="hero">
            <div class="hero-content">
                <h1>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ú‡ßÄ‡¶¨‡¶® ‡¶ó‡¶≤‡ßç‡¶™ ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</h1>
                <p>‡¶∏‡¶¨‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶ó‡¶≤‡ßç‡¶™ ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®, ‡¶∏‡¶¨ ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏‡ßá ‡¶™‡ßú‡ßÅ‡¶®</p>
                <div class="hero-buttons">
                    <a href="#" class="btn-primary" onclick="checkUserForWrite()">‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®</a>
                    <a href="#trending" class="btn-secondary" onclick="scrollToSection('trending')">‡¶ó‡¶≤‡ßç‡¶™ ‡¶™‡ßú‡ßÅ‡¶®</a>
                    <a href="#" class="btn-google" onclick="continueWithGoogle()">
                        <i class="fab fa-google"></i> Google ‡¶¶‡¶ø‡ßü‡ßá ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®
                    </a>
                </div>
                <div class="info" style="margin-top: 20px; background: rgba(255,255,255,0.2); border: none;">
                    <i class="fas fa-sync-alt"></i> 
                    <strong>‡¶∞‡¶ø‡ßü‡ßá‡¶≤-‡¶ü‡¶æ‡¶á‡¶Æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü:</strong> ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ó‡¶≤‡ßç‡¶™ ‡¶∏‡¶¨ ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏‡ßá ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá!
                </div>
            </div>
        </section>
        
        <!-- ‡¶ö‡¶æ‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶™‡¶°‡¶º‡ßÅ‡¶® ‡¶∏‡ßá‡¶ï‡¶∂‡¶® -->
        <section class="section" id="continueReadingSection" style="display: none;">
            <h2><i class="fas fa-bookmark"></i> ‡¶ö‡¶æ‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶™‡¶°‡¶º‡ßÅ‡¶®</h2>
            <div id="continueReadingList"></div>
        </section>
        
        <section id="trending" class="section">
            <h2><i class="fas fa-fire"></i> ‡¶ü‡ßç‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶ó‡¶≤‡ßç‡¶™</h2>
            <div class="loader" id="trendingLoader"></div>
            <div class="stories-grid" id="trendingStories"></div>
        </section>
        <section class="section">
            <h2><i class="fas fa-tags"></i> ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø</h2>
            <div class="categories">
                <button class="category-btn active" onclick="filterStories('all')">‡¶∏‡¶¨ ‡¶ó‡¶≤‡ßç‡¶™</button>
                <button class="category-btn" onclick="filterStories('‡¶≠‡ßÇ‡¶§‡ßá‡¶∞ ‡¶ó‡¶≤‡ßç‡¶™')">üëª ‡¶≠‡ßÇ‡¶§‡ßá‡¶∞ ‡¶ó‡¶≤‡ßç‡¶™</button>
                <button class="category-btn" onclick="filterStories('‡¶™‡ßç‡¶∞‡ßá‡¶Æ')">‚ù§Ô∏è ‡¶™‡ßç‡¶∞‡ßá‡¶Æ</button>
                <button class="category-btn" onclick="filterStories('‡¶∞‡ßã‡¶Æ‡¶æ‡¶û‡ßç‡¶ö')">üèîÔ∏è ‡¶∞‡ßã‡¶Æ‡¶æ‡¶û‡ßç‡¶ö</button>
                <button class="category-btn" onclick="filterStories('‡¶ú‡ßÄ‡¶¨‡¶®')">üå± ‡¶ú‡ßÄ‡¶¨‡¶®</button>
                <button class="category-btn" onclick="filterStories('‡¶ï‡¶Æ‡ßá‡¶°‡¶ø')">üòÇ ‡¶ï‡¶Æ‡ßá‡¶°‡¶ø</button>
                <button class="category-btn" onclick="filterStories('‡¶ï‡¶≤‡ßç‡¶™‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶®')">üöÄ ‡¶ï‡¶≤‡ßç‡¶™‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶®</button>
            </div>
        </section>
        <section class="section">
            <h2><i class="fas fa-book-open"></i> ‡¶∏‡¶∞‡ßç‡¶¨‡¶∂‡ßá‡¶∑ ‡¶ó‡¶≤‡ßç‡¶™</h2>
            <div class="loader" id="storiesLoader"></div>
            <div class="stories-list" id="allStories"></div>
            <button class="btn-load-more" onclick="loadMoreStories()">‡¶Ü‡¶∞‡ßã ‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </section>
    </div>

    <!-- ‡¶≤‡¶ó‡¶á‡¶®/‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶™‡ßá‡¶ú -->
    <div id="auth-page" class="page">
        <div class="form-container">
            <div style="text-align: center; margin-bottom: 20px;">
                <button class="btn-secondary" onclick="showPage('home')" style="margin-bottom: 10px;">
                    <i class="fas fa-arrow-left"></i> ‡¶π‡ßã‡¶Æ‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®
                </button>
            </div>
            
            <div id="loginForm">
                <h2><i class="fas fa-sign-in-alt"></i> ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
                <div class="info">
                    <i class="fas fa-info-circle"></i> 
                    ‡¶®‡¶§‡ßÅ‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ? <a href="#" onclick="showRegisterForm()" style="color: #667eea; font-weight: bold;">‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</a>
                </div>
                <div class="form-group">
                    <label>‡¶á‡¶Æ‡ßá‡¶á‡¶≤</label>
                    <input type="email" id="loginEmail" class="form-control" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤">
                </div>
                <div class="form-group">
                    <label>‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°</label>
                    <input type="password" id="loginPassword" class="form-control" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°">
                </div>
                <button class="btn-primary" onclick="login()" style="width: 100%; padding: 12px;">
                    <i class="fas fa-sign-in-alt"></i> ‡¶≤‡¶ó‡¶á‡¶®
                </button>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn-google" onclick="continueWithGoogle()" style="width: 100%;">
                        <i class="fab fa-google"></i> Google ‡¶¶‡¶ø‡ßü‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </div>
            </div>

            <div id="registerForm" style="display: none;">
                <h2><i class="fas fa-user-plus"></i> ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
                <div class="info">
                    <i class="fas fa-star"></i> 
                    ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡¶ø‡¶ñ‡¶§‡ßá, ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶è‡¶¨‡¶Ç ‡¶≤‡¶æ‡¶á‡¶ï ‡¶¶‡¶ø‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®!
                </div>
                <div class="form-group">
                    <label>‡¶®‡¶æ‡¶Æ</label>
                    <input type="text" id="regName" class="form-control" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶®‡¶æ‡¶Æ">
                </div>
                <div class="form-group">
                    <label>‡¶á‡¶Æ‡ßá‡¶á‡¶≤</label>
                    <input type="email" id="regEmail" class="form-control" placeholder="‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ">
                </div>
                <div class="form-group">
                    <label>‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° (‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡ß¨ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞)</label>
                    <input type="password" id="regPassword" class="form-control" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°">
                </div>
                <div class="form-group">
                    <label>‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</label>
                    <input type="password" id="regConfirmPass" class="form-control" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®">
                </div>
                <button class="btn-primary" onclick="register()" style="width: 100%; padding: 12px;">
                    <i class="fas fa-user-plus"></i> ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn-google" onclick="continueWithGoogle()" style="width: 100%; margin-bottom: 10px;">
                        <i class="fab fa-google"></i> Google ‡¶¶‡¶ø‡ßü‡ßá ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                    <p>‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ü‡¶õ‡ßá? <a href="#" onclick="showLoginForm()" style="color: #667eea; font-weight: bold;">‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- ‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡ßá‡¶ñ‡¶æ ‡¶™‡ßá‡¶ú -->
    <div id="write-page" class="page">
        <div class="form-container">
            <h2><i class="fas fa-pen"></i> ‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®</h2>
            <div class="info" id="writeInfo">
                <i class="fas fa-globe"></i> 
                <strong>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ó‡¶≤‡ßç‡¶™ ‡¶∏‡¶¨ ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá!</strong> ‡¶è‡¶ï‡¶¨‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®, ‡¶∏‡¶¨‡¶æ‡¶á ‡¶™‡ßú‡ßÅ‡¶®‡•§
            </div>
            <div class="form-group">
                <label>‡¶ó‡¶≤‡ßç‡¶™‡ßá‡¶∞ ‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ *</label>
                <input type="text" id="storyTitle" class="form-control" placeholder="‡¶ó‡¶≤‡ßç‡¶™‡ßá‡¶∞ ‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ">
            </div>
            <div class="form-group">
                <label>‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø *</label>
                <select id="storyCategory" class="form-control">
                    <option value="">‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option>
                    <option value="‡¶≠‡ßÇ‡¶§‡ßá‡¶∞ ‡¶ó‡¶≤‡ßç‡¶™">üëª ‡¶≠‡ßÇ‡¶§‡ßá‡¶∞ ‡¶ó‡¶≤‡ßç‡¶™</option>
                    <option value="‡¶™‡ßç‡¶∞‡ßá‡¶Æ">‚ù§Ô∏è ‡¶™‡ßç‡¶∞‡ßá‡¶Æ</option>
                    <option value="‡¶∞‡ßã‡¶Æ‡¶æ‡¶û‡ßç‡¶ö">üèîÔ∏è ‡¶∞‡ßã‡¶Æ‡¶æ‡¶û‡ßç‡¶ö</option>
                    <option value="‡¶ú‡ßÄ‡¶¨‡¶®">üå± ‡¶ú‡ßÄ‡¶¨‡¶®</option>
                    <option value="‡¶ï‡¶Æ‡ßá‡¶°‡¶ø">üòÇ ‡¶ï‡¶Æ‡ßá‡¶°‡¶ø</option>
                    <option value="‡¶ï‡¶≤‡ßç‡¶™‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶®">üöÄ ‡¶ï‡¶≤‡ßç‡¶™‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶®</option>
                    <option value="‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏">üèõÔ∏è ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏</option>
                    <option value="‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶Æ‡ßÇ‡¶≤‡¶ï">üìö ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶Æ‡ßÇ‡¶≤‡¶ï</option>
                </select>
            </div>
            <div class="form-group">
                <label>‡¶ó‡¶≤‡ßç‡¶™‡ßá‡¶∞ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£ *</label>
                <textarea id="storyContent" class="form-control" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ó‡¶≤‡ßç‡¶™ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..." rows="8" oninput="updateCharCount()"></textarea>
                <div style="text-align: right; margin-top: 5px;">
                    <span id="charCount">0</span> / 5000 ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞
                </div>
            </div>
            <div class="form-group">
                <label>‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó‡¶∏ (‡¶ï‡¶Æ‡¶æ ‡¶¶‡¶ø‡ßü‡ßá ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®)</label>
                <input type="text" id="storyTags" class="form-control" placeholder="‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£: ‡¶™‡ßç‡¶∞‡ßá‡¶Æ, ‡¶ú‡ßÄ‡¶¨‡¶®, ‡¶∏‡ßç‡¶Æ‡ßÉ‡¶§‡¶ø, ‡¶∞‡ßã‡¶Æ‡¶æ‡¶û‡ßç‡¶ö">
            </div>
            <button class="btn-primary" onclick="publishStory()" style="width: 100%; padding: 12px;">
                <i class="fas fa-paper-plane"></i> ‡¶ó‡¶≤‡ßç‡¶™ ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®
            </button>
            <div style="text-align: center; margin-top: 20px;">
                <p><a href="#" onclick="showPage('home')" style="color: #667eea;">‚Üê ‡¶π‡ßã‡¶Æ ‡¶™‡ßá‡¶ú‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®</a></p>
            </div>
        </div>
    </div>

    <!-- ‡¶ó‡¶≤‡ßç‡¶™ ‡¶™‡ßú‡¶æ ‡¶™‡ßá‡¶ú -->
    <div id="read-page" class="page">
        <div class="section" id="storyContainer"></div>
    </div>

    <!-- ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶™‡ßá‡¶ú -->
    <div id="profile-page" class="page">
        <div class="section" style="max-width: 1000px; margin: 20px auto;">
            <div id="profileContent"></div>
        </div>
    </div>

    <!-- ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßá‡¶ú -->
    <div id="payment-page" class="page">
        <div class="section" style="max-width: 800px; margin: 20px auto;">
            <h2><i class="fas fa-crown"></i> ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ ‡¶Ü‡¶™‡¶ó‡ßç‡¶∞‡ßá‡¶°</h2>
            <div class="info">
                <i class="fas fa-money-bill-wave"></i> 
                <strong>‡¶∏‡¶ï‡¶≤ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶ó‡¶¶‡ßá ‡¶Ü‡¶∏‡¶¨‡ßá:</strong> ‡ß¶‡ßß‡ß©‡ß®‡ßÆ‡ßØ‡ß≠‡ß¨‡ß™‡ß¶‡ßÆ
            </div>
            
            <div class="payment-options">
                <div class="payment-box">
                    <h3 style="color: #667eea;"><i class="fas fa-infinity"></i> ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶Ü‡¶®‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü‡ßá‡¶°</h3>
                    <div class="payment-amount">‡ß≥ ‡ß´‡ß¶‡ß¶ / ‡¶Æ‡¶æ‡¶∏</div>
                    <ul style="margin: 10px 0; padding-left: 20px; font-size: 14px;">
                        <li>‡¶Ö‡¶∏‡ßÄ‡¶Æ ‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡ßá‡¶ñ‡¶æ</li>
                        <li>‡ßß‡ß¶,‡ß¶‡ß¶‡ß¶+ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞</li>
                        <li>‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ú</li>
                        <li>‡¶Ö‡¶ó‡ßç‡¶∞‡¶æ‡¶ß‡¶ø‡¶ï‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</li>
                    </ul>
                    <button class="btn-primary" onclick="selectPackage('text')" style="width: 100%;">
                        <i class="fas fa-shopping-cart"></i> ‡¶ï‡¶ø‡¶®‡ßÅ‡¶®
                    </button>
                </div>
                
                <div class="payment-box">
                    <h3 style="color: #667eea;"><i class="fas fa-microphone-alt"></i> ‡¶Ö‡¶°‡¶ø‡¶ì ‡ßß ‡¶ò‡¶®‡ßç‡¶ü‡¶æ</h3>
                    <div class="payment-amount">‡ß≥ ‡ß´‡ß¶‡ß¶ / ‡¶è‡¶ï‡¶¨‡¶æ‡¶∞</div>
                    <ul style="margin: 10px 0; padding-left: 20px; font-size: 14px;">
                        <li>‡ßß ‡¶ò‡¶£‡ßç‡¶ü‡¶æ ‡¶Ö‡¶°‡¶ø‡¶ì ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶°‡¶ø‡¶Ç</li>
                        <li>‡ßß‡ß´+ ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü ‡¶ó‡¶≤‡ßç‡¶™</li>
                        <li>‡¶Ö‡¶°‡¶ø‡¶ì ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶°</li>
                        <li>‡¶Ö‡¶°‡¶ø‡¶ì ‡¶∂‡ßá‡ßü‡¶æ‡¶∞‡¶ø‡¶Ç</li>
                    </ul>
                    <button class="btn-primary" onclick="selectPackage('audio')" style="width: 100%;">
                        <i class="fas fa-shopping-cart"></i> ‡¶ï‡¶ø‡¶®‡ßÅ‡¶®
                    </button>
                </div>
                
                <div class="payment-box">
                    <h3 style="color: #667eea;"><i class="fas fa-star"></i> ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ+</h3>
                    <div class="payment-amount">‡ß≥ ‡ßÆ‡ß¶‡ß¶ / ‡¶Æ‡¶æ‡¶∏</div>
                    <ul style="margin: 10px 0; padding-left: 20px; font-size: 14px;">
                        <li>‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü + ‡¶Ö‡¶°‡¶ø‡¶ì</li>
                        <li>‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</li>
                        <li>‡¶è‡¶°-‡¶´‡ßç‡¶∞‡ßÄ ‡¶è‡¶ï‡ßç‡¶∏‡¶™‡ßá‡¶∞‡¶ø‡ßü‡ßá‡¶®‡ßç‡¶∏</li>
                        <li>‡¶∏‡¶ï‡¶≤ ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞ ‡¶Ü‡¶®‡¶≤‡¶ï</li>
                    </ul>
                    <button class="btn-success" onclick="selectPackage('premium')" style="width: 100%;">
                        <i class="fas fa-crown"></i> ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ ‡¶ï‡¶ø‡¶®‡ßÅ‡¶®
                    </button>
                </div>
            </div>
            
            <div id="paymentMethods" style="display: none;">
                <h3><i class="fas fa-mobile-alt"></i> ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßá‡¶•‡¶° ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                <div class="info">
                    <i class="fas fa-phone-alt"></i> 
                    <strong>‡¶∏‡¶ï‡¶≤ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶è‡¶á ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®:</strong> ‡ß¶‡ßß‡ß©‡ß®‡ßÆ‡ßØ‡ß≠‡ß¨‡ß™‡ß¶‡ßÆ
                </div>
                <div class="payment-options" style="margin-top: 15px;">
                    <div class="payment-method" onclick="selectPaymentMethod('bkash')">
                        <div class="payment-icon" style="color: #e2136e;">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <h4>‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂</h4>
                        <p>‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶ì ‡¶∏‡¶π‡¶ú</p>
                        <div class="payment-amount">‡ß¶‡ßß‡ß©‡ß®‡ßÆ‡ßØ‡ß≠‡ß¨‡ß™‡ß¶‡ßÆ</div>
                    </div>
                    <div class="payment-method" onclick="selectPaymentMethod('nagad')">
                        <div class="payment-icon" style="color: #f8a61c;">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <h4>‡¶®‡¶ó‡¶¶</h4>
                        <p>‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶´‡¶æ‡¶∞</p>
                        <div class="payment-amount">‡ß¶‡ßß‡ß©‡ß®‡ßÆ‡ßØ‡ß≠‡ß¨‡ß™‡ß¶‡ßÆ</div>
                    </div>
                    <div class="payment-method" onclick="selectPaymentMethod('rocket')">
                        <div class="payment-icon" style="color: #4a90e2;">
                            <i class="fas fa-rocket"></i>
                        </div>
                        <h4>‡¶∞‡¶ï‡ßá‡¶ü</h4>
                        <p>DBBL ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶Ç‡¶ï‡¶ø‡¶Ç</p>
                        <div class="payment-amount">‡ß¶‡ßß‡ß©‡ß®‡ßÆ‡ßØ‡ß≠‡ß¨‡ß™‡ß¶‡ßÆ</div>
                    </div>
                    <div class="payment-method" onclick="selectPaymentMethod('upay')">
                        <div class="payment-icon" style="color: #00a859;">
                            <i class="fas fa-university"></i>
                        </div>
                        <h4>‡¶á‡¶â‡¶™‡ßá</h4>
                        <p>‡¶á‡¶â‡¶®‡¶ø‡ßü‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶Ç‡¶ï</p>
                        <div class="payment-amount">‡ß¶‡ßß‡ß©‡ß®‡ßÆ‡ßØ‡ß≠‡ß¨‡ß™‡ß¶‡ßÆ</div>
                    </div>
                </div>
            </div>
            
            <div id="paymentRequest" style="display: none;">
                <div class="payment-info">
                    <h3><i class="fas fa-qrcode"></i> ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶®‡¶æ</h3>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 10px 0;">
                        <h4>‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡ßá‡¶™‡¶∏:</h4>
                        <ol style="margin: 10px 0 10px 20px;">
                            <li><strong>‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ID:</strong> <span id="transactionId" style="color: #667eea; font-weight: bold;">-</span></li>
                            <li><strong>‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú:</strong> <span id="paymentPackage">-</span></li>
                            <li><strong>‡¶ü‡¶æ‡¶ï‡¶æ ‡¶™‡¶æ‡¶†‡¶æ‡¶®:</strong> <span id="paymentAmount" style="color: green;">-</span></li>
                            <li><strong>‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßá‡¶•‡¶°:</strong> <span id="paymentMethod" style="color: #dc3545; font-weight: bold;">-</span></li>
                            <li><strong>‡¶®‡¶Æ‡ßç‡¶¨‡¶∞:</strong> <div class="hidden-number" style="font-size: 18px; color: #28a745; font-weight: bold;">‡ß¶‡ßß‡ß©‡ß®‡ßÆ‡ßØ‡ß≠‡ß¨‡ß™‡ß¶‡ßÆ</div></li>
                            <li>‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶™‡¶∞ <strong>‡¶ü‡¶ø‡¶Ü‡¶á‡¶®/‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞</strong> ‡¶®‡¶ø‡¶ö‡ßá ‡¶¶‡¶ø‡¶®</li>
                        </ol>
                        <div class="warning">
                            <i class="fas fa-exclamation-triangle"></i>
                            <strong>‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£:</strong> ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ID ‡¶Æ‡ßá‡¶Æ‡ßã‡¶§‡ßá ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®
                        </div>
                    </div>
                    <div class="form-group">
                        <label>‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏/‡¶ü‡¶ø‡¶Ü‡¶á‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ *</label>
                        <input type="text" id="referenceNumber" class="form-control" placeholder="‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞">
                    </div>
                    <div class="form-group">
                        <label>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤/‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞</label>
                        <input type="text" id="userContact" class="form-control" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶§‡¶•‡ßç‡¶Ø">
                    </div>
                    <button class="btn-success" onclick="verifyPayment()" style="width: 100%;">
                        <i class="fas fa-check-circle"></i> ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                    <div id="paymentStatus" style="margin-top: 15px;"></div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <a href="#" class="btn-secondary" onclick="showPage('home')">
                    <i class="fas fa-home"></i> ‡¶π‡ßã‡¶Æ ‡¶™‡ßá‡¶ú‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®
                </a>
            </div>
        </div>
    </div>

    <!-- ‡¶´‡ßÅ‡¶ü‡¶æ‡¶∞ -->
    <footer id="main-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>‡¶ó‡¶≤‡ßç‡¶™‡ßá‡¶∞ ‡¶ù‡ßÅ‡ßú‡¶ø</h3>
                <p>‡¶∏‡¶¨‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ó‡¶≤‡ßç‡¶™ ‡¶∂‡ßá‡ßü‡¶æ‡¶∞‡¶ø‡¶Ç ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ü‡¶´‡¶∞‡ßç‡¶Æ</p>
                <p><small>üî• ‡¶∞‡¶ø‡ßü‡ßá‡¶≤-‡¶ü‡¶æ‡¶á‡¶Æ ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶ú</small></p>
            </div>
            <div class="footer-section">
                <h3>‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶≤‡¶ø‡¶Ç‡¶ï</h3>
                <a href="#" onclick="showPage('home')">‡¶π‡ßã‡¶Æ</a>
                <a href="#" onclick="checkUserForWrite()">‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®</a>
                <a href="#" onclick="showAuthPage()">‡¶≤‡¶ó‡¶á‡¶®/‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞</a>
                <a href="#" onclick="showPage('payment')">‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ ‡¶ï‡¶ø‡¶®‡ßÅ‡¶®</a>
            </div>
            <div class="footer-section">
                <h3>‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</h3>
                <p><i class="fas fa-phone-alt"></i> ‡ß¶‡ßß‡ß©‡ß®‡ßÆ‡ßØ‡ß≠‡ß¨‡ß™‡ß¶‡ßÆ</p>
                <p><i class="fas fa-envelope"></i> payment@golperjhuri.com</p>
                <p>‡ß®‡ß™/‡ß≠ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>¬© 2024 ‡¶ó‡¶≤‡ßç‡¶™‡ßá‡¶∞ ‡¶ù‡ßÅ‡ßú‡¶ø | ‡¶∏‡¶ï‡¶≤ ‡¶Ö‡¶ß‡¶ø‡¶ï‡¶æ‡¶∞ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§</p>
            <p><small>üì± ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞: ‡ß¶‡ßß‡ß©‡ß®‡ßÆ‡ßØ‡ß≠‡ß¨‡ß™‡ß¶‡ßÆ | üåê ‡¶∏‡¶¨ ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏‡ßá ‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶ï‡¶∞‡ßÅ‡¶®</small></p>
        </div>
    </footer>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

    <script>
        // ============================================
        // FIREBASE CONFIGURATION - REAL-TIME DATABASE
        // ============================================
        const firebaseConfig = {
            apiKey: "AIzaSyD5vNJwYMLD45paxKlzHXHhtsN1oYVQJ4I",
            authDomain: "golperjhuri-realtime.firebaseapp.com",
            databaseURL: "https://golperjhuri-realtime-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "golperjhuri-realtime",
            storageBucket: "golperjhuri-realtime.appspot.com",
            messagingSenderId: "987654321012",
            appId: "1:987654321012:web:abc123def456ghi789jkl"
        };

        // Firebase Initialize
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const auth = firebase.auth();

        // ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶≠‡ßá‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤
        let currentUser = null;
        let currentStoryId = null;
        let selectedPackage = null;
        let selectedPaymentMethod = null;
        let currentTransactionId = null;

        // ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶Æ‡ßá‡¶®‡ßÅ
        function toggleMenu() { 
            document.getElementById('navLinks').classList.toggle('active'); 
        }
        
        // ‡¶™‡ßá‡¶ú ‡¶∂‡ßã
        function showPage(pageName) { 
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById(pageName + '-page').classList.add('active');
            document.getElementById('navLinks').classList.remove('active');
            window.scrollTo(0, 0);
            
            if (pageName === 'home') { 
                loadStories(); 
                updateAuthLinks();
                loadContinueReading();
            }
            if (pageName === 'profile') { 
                loadProfile(); 
            }
        }

        // ‡¶Ö‡¶• ‡¶™‡ßá‡¶ú ‡¶∂‡ßã
        function showAuthPage() {
            showPage('auth');
            showLoginForm();
        }

        // ‡¶≤‡¶ó‡¶á‡¶® ‡¶´‡¶∞‡ßç‡¶Æ ‡¶∂‡ßã
        function showLoginForm() {
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('registerForm').style.display = 'none';
        }

        // ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶´‡¶∞‡ßç‡¶Æ ‡¶∂‡ßã
        function showRegisterForm() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'block';
        }

        // Google ‡¶¶‡¶ø‡ßü‡ßá ‡¶≤‡¶ó‡¶á‡¶®/‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞
        function continueWithGoogle() {
            // Simulate Google Login (Production-‡¶è Firebase Auth ‡¶¶‡¶ø‡ßü‡ßá ‡¶ï‡¶∞‡¶¨‡ßá‡¶®)
            const displayName = "Google User " + Math.floor(Math.random() * 1000);
            const email = "user" + Date.now() + "@gmail.com";
            
            currentUser = {
                uid: 'google_' + Date.now(),
                displayName: displayName,
                email: email,
                photoURL: 'https://cdn-icons-png.flaticon.com/512/2991/2991148.png',
                isGoogle: true
            };
            
            // LocalStorage-‡¶è ‡¶∏‡ßá‡¶≠
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            localStorage.setItem('users', JSON.stringify([currentUser]));
            
            updateAuthLinks();
            alert('Google ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶¶‡¶ø‡ßü‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶∏‡¶´‡¶≤!');
            showPage('home');
            
            // Firebase-‡¶è ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶∏‡ßá‡¶≠ (‡¶Ø‡¶¶‡¶ø ‡¶•‡¶æ‡¶ï‡ßá)
            if (auth) {
                database.ref('users/' + currentUser.uid).set({
                    name: displayName,
                    email: email,
                    joined: Date.now(),
                    isPremium: false
                });
            }
        }

        // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ö‡ßá‡¶ï (‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)
        function checkUserForWrite() {
            const user = getCurrentUser();
            if (!user) {
                showAuthPage();
                alert('‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡¶ø‡¶ñ‡¶§‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶¨‡¶æ ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®!');
            } else {
                showPage('write');
            }
        }

        // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ö‡ßá‡¶ï (‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)
        function checkUser(pageName) {
            const user = getCurrentUser();
            if (!user) {
                showAuthPage();
            } else {
                showPage(pageName);
            }
        }

        // Firebase Authentication State Listener
        if (auth) {
            auth.onAuthStateChanged((user) => {
                if (user) {
                    currentUser = user;
                    console.log("User logged in:", user.email);
                    updateAuthLinks();
                } else {
                    console.log("User logged out");
                    updateAuthLinks();
                }
            });
        }

        // ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú ‡¶•‡ßá‡¶ï‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶®‡¶ø‡¶®
        function getCurrentUser() {
            const user = JSON.parse(localStorage.getItem('currentUser'));
            if (user) {
                currentUser = user;
                return user;
            }
            return null;
        }

        // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
        function setCurrentUser(user) {
            currentUser = user;
            localStorage.setItem('currentUser', JSON.stringify(user));
            
            // Firebase-‡¶è ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®
            if (database) {
                database.ref('users/' + user.uid).set({
                    name: user.displayName || user.name,
                    email: user.email,
                    joined: Date.now(),
                    isPremium: user.isPremium || false,
                    lastLogin: Date.now()
                });
            }
        }

        // ‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡ßã‡¶° (Firebase ‡¶•‡ßá‡¶ï‡ßá)
        function loadStories() {
            showLoader('trendingLoader');
            showLoader('storiesLoader');
            
            if (database) {
                // Firebase ‡¶•‡ßá‡¶ï‡ßá ‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡ßã‡¶°
                database.ref('stories').orderByChild('timestamp').limitToLast(50).once('value')
                    .then((snapshot) => {
                        hideLoader('trendingLoader');
                        hideLoader('storiesLoader');
                        
                        const stories = [];
                        snapshot.forEach((childSnapshot) => {
                            const story = childSnapshot.val();
                            stories.push({
                                id: childSnapshot.key,
                                ...story
                            });
                        });
                        
                        // ‡¶∏‡¶¨ ‡¶ó‡¶≤‡ßç‡¶™ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã (‡¶®‡¶§‡ßÅ‡¶® ‡¶•‡ßá‡¶ï‡ßá ‡¶™‡ßÅ‡¶∞‡¶æ‡¶®‡ßã)
                        displayAllStories(stories.reverse());
                        
                        // ‡¶ü‡ßç‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶ó‡¶≤‡ßç‡¶™ (‡¶∏‡¶¨‡¶ö‡ßá‡ßü‡ßá ‡¶¨‡ßá‡¶∂‡¶ø ‡¶≤‡¶æ‡¶á‡¶ï)
                        const trending = [...stories].sort((a,b) => (b.likes || 0) - (a.likes || 0)).slice(0, 4);
                        displayTrendingStories(trending);
                        
                        // LocalStorage-‡¶è‡¶ì ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®
                        localStorage.setItem('stories', JSON.stringify(stories));
                    })
                    .catch((error) => {
                        console.log("Firebase error, using localStorage:", error);
                        loadStoriesFromLocalStorage();
                    });
            } else {
                loadStoriesFromLocalStorage();
            }
        }

        // LocalStorage ‡¶•‡ßá‡¶ï‡ßá ‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡ßã‡¶°
        function loadStoriesFromLocalStorage() {
            hideLoader('trendingLoader');
            hideLoader('storiesLoader');
            
            let stories = JSON.parse(localStorage.getItem('stories')) || [];
            
            // ‡¶Ø‡¶¶‡¶ø LocalStorage-‡¶è ‡¶ï‡ßã‡¶®‡ßã ‡¶ó‡¶≤‡ßç‡¶™ ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡ßá, ‡¶°‡ßá‡¶Æ‡ßã ‡¶ó‡¶≤‡ßç‡¶™ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
            if (stories.length === 0) {
                stories = [
                    {
                        id: '1',
                        title: "‡¶∞‡¶æ‡¶§‡ßá‡¶∞ ‡¶Ö‡¶®‡ßç‡¶ß‡¶ï‡¶æ‡¶∞‡ßá",
                        content: "‡¶∏‡ßá‡¶á ‡¶≠‡ßü‡¶Ç‡¶ï‡¶∞ ‡¶∞‡¶æ‡¶§‡ßá‡¶∞ ‡¶ï‡¶•‡¶æ ‡¶è‡¶ñ‡¶®‡ßã ‡¶Æ‡¶®‡ßá ‡¶™‡ßú‡ßá... ‡¶∞‡¶æ‡¶§ ‡ßß‡ß®‡¶ü‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶ï‡ßá ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶∞ ‡¶¨‡¶æ‡ßú‡¶ø ‡¶•‡ßá‡¶ï‡ßá ‡¶´‡¶ø‡¶∞‡¶õ‡¶ø‡¶≤‡¶æ‡¶Æ‡•§ ‡¶∞‡¶æ‡¶∏‡ßç‡¶§‡¶æ ‡¶è‡¶ï‡¶¶‡¶Æ ‡¶´‡¶æ‡¶Å‡¶ï‡¶æ‡•§ ‡¶π‡¶†‡¶æ‡ßé ‡¶™‡ßá‡¶õ‡¶®‡ßá ‡¶™‡¶æ‡ßü‡ßá‡¶∞ ‡¶∂‡¶¨‡ßç‡¶¶ ‡¶∂‡ßÅ‡¶®‡¶§‡ßá ‡¶™‡ßá‡¶≤‡¶æ‡¶Æ‡•§ ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶™‡ßá‡¶õ‡¶®‡ßá ‡¶§‡¶æ‡¶ï‡¶ø‡ßü‡ßá ‡¶ï‡¶æ‡¶â‡¶ï‡ßá‡¶á ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡ßá‡¶≤‡¶æ‡¶Æ ‡¶®‡¶æ‡•§\n\n‡¶∂‡¶¨‡ßç‡¶¶‡¶ü‡¶æ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶∂‡ßÅ‡¶®‡¶§‡ßá ‡¶™‡ßá‡¶≤‡¶æ‡¶Æ, ‡¶è‡¶¨‡¶æ‡¶∞ ‡¶Ü‡¶∞‡¶ì ‡¶ï‡¶æ‡¶õ‡ßá ‡¶•‡ßá‡¶ï‡ßá‡•§ ‡¶¶‡ßå‡ßú‡ßá ‡¶™‡¶æ‡¶≤‡¶æ‡¶§‡ßá ‡¶ö‡¶æ‡¶á‡¶≤‡¶æ‡¶Æ ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶™‡¶æ ‡¶Ø‡ßá‡¶® ‡¶ú‡¶Æ‡ßá ‡¶ó‡ßá‡¶õ‡ßá‡•§\n\n‡¶§‡¶æ‡¶∞‡¶™‡¶∞ ‡¶π‡¶†‡¶æ‡ßé ‡¶ï‡ßá‡¶â ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶Å‡¶ß‡ßá ‡¶π‡¶æ‡¶§ ‡¶∞‡¶æ‡¶ñ‡¶≤...",
                        author: "‡¶Ö‡¶§‡¶ø‡¶•‡¶ø ‡¶≤‡ßá‡¶ñ‡¶ï",
                        category: "‡¶≠‡ßÇ‡¶§‡ßá‡¶∞ ‡¶ó‡¶≤‡ßç‡¶™",
                        tags: ["‡¶≠‡ßÇ‡¶§", "‡¶∞‡¶æ‡¶§", "‡¶≠‡ßü", "‡¶Ö‡¶≠‡¶ø‡¶ú‡ßç‡¶û‡¶§‡¶æ"],
                        likes: 25,
                        views: 180,
                        commentCount: 8,
                        timestamp: Date.now() - 86400000,
                        date: new Date(Date.now() - 86400000).toLocaleDateString('bn-BD')
                    },
                    {
                        id: '2',
                        title: "‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶™‡ßç‡¶∞‡ßá‡¶Æ‡ßá‡¶∞ ‡¶ó‡¶≤‡ßç‡¶™",
                        content: "‡¶ï‡¶≤‡ßá‡¶ú ‡¶ú‡ßÄ‡¶¨‡¶®‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶™‡ßç‡¶∞‡ßá‡¶Æ‡ßá‡¶∞ ‡¶ï‡¶•‡¶æ ‡¶Æ‡¶®‡ßá ‡¶™‡ßú‡ßá‡•§ ‡¶∏‡ßá‡¶á ‡¶∂‡ßÄ‡¶§‡ßá‡¶∞ ‡¶∏‡¶ï‡¶æ‡¶≤, ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏‡ßá‡¶∞ ‡¶™‡¶ø‡¶õ‡¶®‡ßá‡¶∞ ‡¶¨‡ßá‡¶û‡ßç‡¶ö‡ßá ‡¶¨‡¶∏‡ßá ‡¶õ‡¶ø‡¶≤‡¶æ‡¶Æ‡•§ ‡¶π‡¶†‡¶æ‡ßé ‡¶¶‡¶∞‡¶ú‡¶æ ‡¶¶‡¶ø‡ßü‡ßá ‡¶è‡¶ï‡¶ú‡¶® ‡¶®‡¶§‡ßÅ‡¶® ‡¶õ‡¶æ‡¶§‡ßç‡¶∞‡ßÄ ‡¶è‡¶≤‡ßã‡•§ ‡¶§‡¶æ‡¶∞ ‡¶ö‡ßã‡¶ñ‡ßá ‡¶õ‡¶ø‡¶≤ ‡¶è‡¶ï ‡¶Ö‡¶¶‡ßç‡¶≠‡ßÅ‡¶§ ‡¶¶‡ßç‡¶Ø‡ßÅ‡¶§‡¶ø, ‡¶Ø‡ßá‡¶® ‡¶™‡ßÅ‡¶∞‡ßã ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏‡¶∞‡ßÅ‡¶Æ ‡¶Ü‡¶≤‡ßã ‡¶π‡ßü‡ßá ‡¶ó‡ßá‡¶≤‡•§\n\n‡¶§‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶õ‡¶ø‡¶≤ ‡¶®‡ßÄ‡¶≤‡¶æ‡•§ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶§‡ßá‡¶á ‡¶¨‡ßÅ‡¶ù‡¶§‡ßá ‡¶™‡ßá‡¶∞‡ßá‡¶õ‡¶ø‡¶≤‡¶æ‡¶Æ, ‡¶∏‡ßá ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡•§ ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶ï‡¶•‡¶æ ‡¶¨‡¶≤‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶π‡¶∏ ‡¶π‡¶ö‡ßç‡¶õ‡¶ø‡¶≤ ‡¶®‡¶æ‡•§ ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶™‡¶∞ ‡¶¶‡¶ø‡¶® ‡¶§‡¶æ‡¶ï‡ßá‡¶á ‡¶¶‡ßá‡¶ñ‡¶§‡¶æ‡¶Æ, ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶¨‡¶≤‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶§‡¶æ‡¶Æ ‡¶®‡¶æ‡•§\n\n‡¶è‡¶ï‡¶¶‡¶ø‡¶® ‡¶≤‡¶æ‡¶á‡¶¨‡ßç‡¶∞‡ßá‡¶∞‡¶ø‡¶§‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶π‡¶≤‡ßã‡•§ ‡¶∏‡ßá ‡¶è‡¶ï‡¶æ ‡¶¨‡¶∏‡ßá ‡¶¨‡¶á ‡¶™‡ßú‡¶õ‡¶ø‡¶≤‡•§ ‡¶∏‡¶æ‡¶π‡¶∏ ‡¶ï‡¶∞‡ßá ‡¶ï‡¶æ‡¶õ‡ßá ‡¶ó‡ßá‡¶≤‡¶æ‡¶Æ...",
                        author: "‡¶∞‡¶π‡¶ø‡¶Æ",
                        category: "‡¶™‡ßç‡¶∞‡ßá‡¶Æ",
                        tags: ["‡¶™‡ßç‡¶∞‡ßá‡¶Æ", "‡¶ï‡¶≤‡ßá‡¶ú", "‡¶∏‡ßç‡¶Æ‡ßÉ‡¶§‡¶ø", "‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶™‡ßç‡¶∞‡ßá‡¶Æ"],
                        likes: 42,
                        views: 210,
                        commentCount: 15,
                        timestamp: Date.now() - 172800000,
                        date: new Date(Date.now() - 172800000).toLocaleDateString('bn-BD')
                    },
                    {
                        id: '3',
                        title: "‡¶™‡¶æ‡¶π‡¶æ‡ßú‡ßá‡¶∞ ‡¶∞‡ßã‡¶Æ‡¶æ‡¶û‡ßç‡¶ö",
                        content: "‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶™‡¶æ‡¶π‡¶æ‡ßú‡ßá ‡¶â‡¶†‡¶æ‡¶∞ ‡¶Ö‡¶≠‡¶ø‡¶ú‡ßç‡¶û‡¶§‡¶æ‡•§ ‡¶∏‡¶¨‡¶æ‡¶á ‡¶¨‡¶≤‡ßá‡¶õ‡¶ø‡¶≤, \"‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶™‡¶æ‡¶∞‡¶¨‡ßá ‡¶®‡¶æ\"‡•§ ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶Ü‡¶Æ‡¶ø ‡¶†‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá‡¶õ‡¶ø‡¶≤‡¶æ‡¶Æ, ‡¶Ø‡ßá‡¶≠‡¶æ‡¶¨‡ßá‡¶á ‡¶π‡ßã‡¶ï ‡¶â‡¶†‡¶¨‡ßã‡•§\n\n‡¶∂‡ßÅ‡¶∞‡ßÅ‡¶ü‡¶æ ‡¶∏‡¶π‡¶ú ‡¶õ‡¶ø‡¶≤, ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶Ø‡¶§ ‡¶â‡¶™‡¶∞‡ßá ‡¶â‡¶†‡¶õ‡¶ø‡¶≤‡¶æ‡¶Æ, ‡¶§‡¶§‡¶á ‡¶ï‡¶∑‡ßç‡¶ü ‡¶π‡¶ö‡ßç‡¶õ‡¶ø‡¶≤‡•§ ‡¶™‡¶æ ‡¶ï‡¶æ‡¶Å‡¶™‡¶õ‡¶ø‡¶≤, ‡¶∂‡ßç‡¶¨‡¶æ‡¶∏ ‡¶®‡¶ø‡¶§‡ßá ‡¶ï‡¶∑‡ßç‡¶ü ‡¶π‡¶ö‡ßç‡¶õ‡¶ø‡¶≤‡•§ ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶•‡¶æ‡¶Æ‡¶ø‡¶®‡¶ø‡•§\n\n‡¶Ø‡¶ñ‡¶® ‡¶ö‡ßÇ‡ßú‡¶æ‡ßü ‡¶™‡ßå‡¶Å‡¶õ‡¶æ‡¶≤‡¶æ‡¶Æ, ‡¶§‡¶ñ‡¶® ‡¶∏‡ßÇ‡¶∞‡ßç‡¶Ø ‡¶°‡ßÅ‡¶¨‡¶õ‡¶ø‡¶≤‡•§ ‡¶Ü‡¶ï‡¶æ‡¶∂ ‡¶≤‡¶æ‡¶≤ ‡¶π‡ßü‡ßá ‡¶ó‡¶ø‡ßü‡ßá‡¶õ‡¶ø‡¶≤‡•§ ‡¶∏‡ßá‡¶á ‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø ‡¶Ü‡¶ú‡¶ì ‡¶≠‡ßÅ‡¶≤‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶ø‡¶®‡¶ø‡•§",
                        author: "‡¶∏‡¶æ‡¶ó‡¶∞",
                        category: "‡¶∞‡ßã‡¶Æ‡¶æ‡¶û‡ßç‡¶ö",
                        tags: ["‡¶™‡¶æ‡¶π‡¶æ‡ßú", "‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶≠‡ßá‡¶û‡ßç‡¶ö‡¶æ‡¶∞", "‡¶™‡ßç‡¶∞‡¶ï‡ßÉ‡¶§‡¶ø", "‡¶ú‡ßü"],
                        likes: 38,
                        views: 195,
                        commentCount: 12,
                        timestamp: Date.now() - 259200000,
                        date: new Date(Date.now() - 259200000).toLocaleDateString('bn-BD')
                    }
                ];
                localStorage.setItem('stories', JSON.stringify(stories));
            }
            
            displayAllStories(stories);
            
            // ‡¶ü‡ßç‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶ó‡¶≤‡ßç‡¶™
            const trending = [...stories].sort((a,b) => (b.likes || 0) - (a.likes || 0)).slice(0, 3);
            displayTrendingStories(trending);
        }

        function showLoader(loaderId) {
            const loader = document.getElementById(loaderId);
            if (loader) loader.style.display = 'block';
        }

        function hideLoader(loaderId) {
            const loader = document.getElementById(loaderId);
            if (loader) loader.style.display = 'none';
        }

        function displayAllStories(stories) {
            const container = document.getElementById('allStories');
            if (!container) return;
            
            if (stories.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <i class="fas fa-book-open" style="font-size: 50px; margin-bottom: 20px; opacity: 0.3;"></i>
                        <h3>‡¶ï‡ßã‡¶®‡ßã ‡¶ó‡¶≤‡ßç‡¶™ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø</h3>
                        <p>‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶ó‡¶≤‡ßç‡¶™‡¶ü‡¶ø ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶¨‡¶æ‡¶á‡¶ï‡ßá ‡¶™‡ßú‡¶§‡ßá ‡¶¶‡¶ø‡¶®!</p>
                        <button class="btn-primary" onclick="checkUserForWrite()" style="margin-top: 15px;">
                            ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®
                        </button>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            stories.forEach(story => {
                const card = createStoryCard(story);
                container.appendChild(card);
            });
        }

        function displayTrendingStories(stories) {
            const container = document.getElementById('trendingStories');
            if (!container || stories.length === 0) return;
            
            container.innerHTML = '';
            stories.forEach(story => {
                const card = createStoryCard(story);
                container.appendChild(card);
            });
        }

        // ‡¶ó‡¶≤‡ßç‡¶™ ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶§‡ßà‡¶∞‡¶ø
        function createStoryCard(story) {
            const card = document.createElement('div');
            card.className = 'story-card';
            card.onclick = () => viewStory(story.id);
            
            const imgClass = story.category === '‡¶≠‡ßÇ‡¶§‡ßá‡¶∞ ‡¶ó‡¶≤‡ßç‡¶™' ? 'story-img story-ghost' : 'story-img';
            const excerpt = story.content ? (story.content.substring(0, 120) + '...') : '‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£ ‡¶®‡ßá‡¶á';
            const isBookmarked = checkBookmark(story.id);
            
            card.innerHTML = `
                <div class="${imgClass}"></div>
                <div class="story-content">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                        <h3 class="story-title">${story.title || '‡¶®‡¶æ‡¶Æ‡¶π‡ßÄ‡¶® ‡¶ó‡¶≤‡ßç‡¶™'}</h3>
                        <button class="bookmark-btn ${isBookmarked ? 'active' : ''}" onclick="toggleBookmark(event, '${story.id}')">
                            <i class="fas fa-bookmark"></i>
                        </button>
                    </div>
                    <p class="story-excerpt">${excerpt}</p>
                    <div class="tags">
                        <span class="tag ${story.category === '‡¶≠‡ßÇ‡¶§‡ßá‡¶∞ ‡¶ó‡¶≤‡ßç‡¶™' ? 'ghost' : ''}">${story.category || '‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£'}</span>
                        ${story.isPremium ? '<span class="tag" style="background: #FFD700; color: #333;">‚≠ê ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ</span>' : ''}
                    </div>
                    <div class="story-meta">
                        <span><i class="fas fa-user"></i> ${story.author || '‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ'}</span>
                        <span><i class="fas fa-heart"></i> ${story.likes || 0}</span>
                        <span><i class="fas fa-eye"></i> ${story.views || 0}</span>
                        <span><i class="fas fa-comment"></i> ${story.commentCount || 0}</span>
                    </div>
                </div>
            `;
            return card;
        }

        // ‡¶¨‡ßÅ‡¶ï‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï ‡¶ö‡ßá‡¶ï
        function checkBookmark(storyId) {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarks')) || [];
            return bookmarks.includes(storyId);
        }

        // ‡¶¨‡ßÅ‡¶ï‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï ‡¶ü‡¶ó‡¶≤
        function toggleBookmark(event, storyId) {
            event.stopPropagation();
            const user = getCurrentUser();
            if (!user) {
                alert('‡¶¨‡ßÅ‡¶ï‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï ‡¶ï‡¶∞‡¶§‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!');
                showAuthPage();
                return;
            }
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarks')) || [];
            const index = bookmarks.indexOf(storyId);
            
            if (index > -1) {
                bookmarks.splice(index, 1);
                event.target.classList.remove('active');
                alert('‡¶¨‡ßÅ‡¶ï‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï ‡¶∏‡¶∞‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá!');
            } else {
                bookmarks.push(storyId);
                event.target.classList.add('active');
                alert('‡¶ó‡¶≤‡ßç‡¶™ ‡¶¨‡ßÅ‡¶ï‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!');
            }
            
            localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
            
            // Firebase-‡¶è ‡¶∏‡ßá‡¶≠ (‡¶Ø‡¶¶‡¶ø ‡¶•‡¶æ‡¶ï‡ßá)
            if (database && user.uid) {
                database.ref('bookmarks/' + user.uid).set(bookmarks);
            }
        }

        // ‡¶ö‡¶æ‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶™‡¶°‡¶º‡ßÅ‡¶® ‡¶≤‡ßã‡¶°
        function loadContinueReading() {
            const user = getCurrentUser();
            if (!user) {
                document.getElementById('continueReadingSection').style.display = 'none';
                return;
            }
            
            const continueReading = JSON.parse(localStorage.getItem('continueReading')) || {};
            const storyIds = Object.keys(continueReading);
            
            if (storyIds.length === 0) {
                document.getElementById('continueReadingSection').style.display = 'none';
                return;
            }
            
            const container = document.getElementById('continueReadingList');
            const stories = JSON.parse(localStorage.getItem('stories')) || [];
            
            let html = '<div class="stories-grid">';
            storyIds.slice(0, 3).forEach(storyId => {
                const story = stories.find(s => s.id == storyId);
                if (story) {
                    const progress = continueReading[storyId] || 0;
                    const progressPercent = Math.min(100, Math.max(0, progress));
                    
                    html += `
                        <div class="story-card" onclick="continueStory('${storyId}')">
                            <div class="story-img ${story.category === '‡¶≠‡ßÇ‡¶§‡ßá‡¶∞ ‡¶ó‡¶≤‡ßç‡¶™' ? 'story-ghost' : ''}"></div>
                            <div class="story-content">
                                <h3 class="story-title">${story.title}</h3>
                                <div style="margin: 10px 0;">
                                    <div style="background: #e0e0e0; height: 5px; border-radius: 3px;">
                                        <div style="background: #28a745; width: ${progressPercent}%; height: 100%; border-radius: 3px;"></div>
                                    </div>
                                    <small style="color: #666;">${progressPercent.toFixed(0)}% ‡¶™‡ßú‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá</small>
                                </div>
                                <div class="story-meta">
                                    <span><i class="fas fa-user"></i> ${story.author}</span>
                                    <span><i class="fas fa-clock"></i> ‡¶ö‡¶æ‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶™‡¶°‡¶º‡ßÅ‡¶®</span>
                                </div>
                            </div>
                        </div>
                    `;
                }
            });
            html += '</div>';
            
            container.innerHTML = html;
            document.getElementById('continueReadingSection').style.display = 'block';
        }

        // ‡¶ó‡¶≤‡ßç‡¶™ ‡¶ö‡¶æ‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶™‡¶°‡¶º‡ßÅ‡¶®
        function continueStory(storyId) {
            viewStory(storyId);
        }

        // ‡¶ó‡¶≤‡ßç‡¶™ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
        function viewStory(storyId) {
            currentStoryId = storyId;
            
            // ‡¶™‡ßá‡¶ú ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶™‡¶ú‡¶ø‡¶∂‡¶® ‡¶∏‡ßá‡¶≠
            saveReadingProgress(storyId, 0);
            
            const stories = JSON.parse(localStorage.getItem('stories')) || [];
            const story = stories.find(s => s.id == storyId);
            
            if (!story) {
                alert('‡¶ó‡¶≤‡ßç‡¶™‡¶ü‡¶ø ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø!');
                return;
            }
            
            // ‡¶≠‡¶ø‡¶â ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶á‡¶®‡¶ï‡ßç‡¶∞‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü
            story.views = (story.views || 0) + 1;
            
            // LocalStorage ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
            const index = stories.findIndex(s => s.id == storyId);
            if (index > -1) {
                stories[index] = story;
                localStorage.setItem('stories', JSON.stringify(stories));
            }
            
            // Firebase-‡¶è ‡¶Ü‡¶™‡¶°‡ßá‡¶ü (‡¶Ø‡¶¶‡¶ø ‡¶•‡¶æ‡¶ï‡ßá)
            if (database) {
                database.ref('stories/' + storyId).update({ 
                    views: story.views 
                });
            }
            
            const container = document.getElementById('storyContainer');
            
            container.innerHTML = `
                <div style="max-width: 800px; margin: 0 auto;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <button class="btn-secondary" onclick="showPage('home')">
                            <i class="fas fa-arrow-left"></i> ‡¶™‡¶ø‡¶õ‡¶®‡ßá
                        </button>
                        <button class="bookmark-btn ${checkBookmark(storyId) ? 'active' : ''}" onclick="toggleBookmarkForStory('${storyId}')">
                            <i class="fas fa-bookmark"></i> ‡¶¨‡ßÅ‡¶ï‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï
                        </button>
                    </div>
                    
                    <h1 style="color: #667eea; margin-bottom: 10px;">${story.title || '‡¶®‡¶æ‡¶Æ‡¶π‡ßÄ‡¶® ‡¶ó‡¶≤‡ßç‡¶™'}</h1>
                    <div style="display: flex; justify-content: space-between; color: #666; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid #eee;">
                        <div>
                            <i class="fas fa-user"></i> ${story.author || '‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ'} | 
                            <i class="fas fa-calendar"></i> ${story.date || new Date().toLocaleDateString('bn-BD')} | 
                            <i class="fas fa-eye"></i> ${story.views}
                        </div>
                        <div>
                            <span class="tag ${story.category === '‡¶≠‡ßÇ‡¶§‡ßá‡¶∞ ‡¶ó‡¶≤‡ßç‡¶™' ? 'ghost' : ''}">${story.category || '‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£'}</span>
                        </div>
                    </div>
                    
                    <div id="storyContent" style="font-size: 16px; line-height: 1.8; margin-bottom: 30px; padding: 20px; background: #f9f9f9; border-radius: 10px; white-space: pre-line;" onscroll="trackReadingProgress('${storyId}')">
                        ${story.content || '‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶®‡ßá‡¶á'}
                    </div>
                    
                    <div class="tags" style="margin-bottom: 15px;">
                        ${(story.tags || []).map(tag => `<span class="tag ${story.category === '‡¶≠‡ßÇ‡¶§‡ßá‡¶∞ ‡¶ó‡¶≤‡ßç‡¶™' ? 'ghost' : ''}">#${tag}</span>`).join('')}
                    </div>
                    
                    <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                        <button class="btn-primary" onclick="likeStory('${storyId}')">
                            <i class="fas fa-heart"></i> ‡¶≤‡¶æ‡¶á‡¶ï (${story.likes || 0})
                        </button>
                        <button class="btn-secondary" onclick="shareStory('${storyId}')">
                            <i class="fas fa-share"></i> ‡¶∂‡ßá‡ßü‡¶æ‡¶∞
                        </button>
                    </div>
                    
                    <div id="commentsSection" style="margin-top: 30px;">
                        <h3><i class="fas fa-comments"></i> ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø (${story.commentCount || 0})</h3>
                        <div id="commentsList" style="margin: 15px 0;"></div>
                        
                        <div class="form-group" style="margin: 15px 0;">
                            <textarea id="commentText" class="form-control" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..." rows="3"></textarea>
                        </div>
                        <button class="btn-primary" onclick="postComment('${storyId}')">
                            <i class="fas fa-paper-plane"></i> ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
                        </button>
                    </div>
                    
                    <div class="continue-reading" id="continueReadingInfo" style="display: none;">
                        <h4><i class="fas fa-book-open"></i> ‡¶ö‡¶æ‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶™‡¶°‡¶º‡ßÅ‡¶®</h4>
                        <p>‡¶è‡¶á ‡¶ó‡¶≤‡ßç‡¶™‡¶ü‡¶ø ‡¶Ü‡¶™‡¶®‡¶ø ‡¶Ü‡¶ó‡ßá ‡¶™‡¶°‡¶º‡¶õ‡¶ø‡¶≤‡ßá‡¶®‡•§ ‡¶™‡¶°‡¶º‡¶æ ‡¶ö‡¶æ‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶Ø‡ßá‡¶§‡ßá ‡¶ö‡¶æ‡¶®?</p>
                        <button class="btn-success" onclick="scrollToLastPosition('${storyId}')">
                            <i class="fas fa-play"></i> ‡¶Ø‡ßá‡¶ñ‡¶æ‡¶®‡ßá ‡¶•‡ßá‡¶Æ‡ßá‡¶õ‡¶ø‡¶≤‡¶æ‡¶Æ ‡¶∏‡ßá‡¶ñ‡¶æ‡¶® ‡¶•‡ßá‡¶ï‡ßá ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®
                        </button>
                    </div>
                </div>
            `;
            
            // ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó
            const storyContent = document.getElementById('storyContent');
            storyContent.addEventListener('scroll', () => trackReadingProgress(storyId));
            
            loadComments(storyId);
            showPage('read');
            
            // ‡¶ö‡¶æ‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶™‡¶°‡¶º‡ßÅ‡¶® ‡¶á‡¶®‡¶´‡ßã ‡¶∂‡ßã
            const continueReading = JSON.parse(localStorage.getItem('continueReading')) || {};
            if (continueReading[storyId] > 10) {
                document.getElementById('continueReadingInfo').style.display = 'block';
            }
        }

        // ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï
        function trackReadingProgress(storyId) {
            const storyContent = document.getElementById('storyContent');
            if (!storyContent) return;
            
            const scrollTop = storyContent.scrollTop;
            const scrollHeight = storyContent.scrollHeight - storyContent.clientHeight;
            const progress = scrollHeight > 0 ? (scrollTop / scrollHeight) * 100 : 0;
            
            saveReadingProgress(storyId, progress);
        }

        // ‡¶∞‡¶ø‡¶°‡¶ø‡¶Ç ‡¶™‡ßç‡¶∞‡ßã‡¶ó‡ßç‡¶∞‡ßá‡¶∏ ‡¶∏‡ßá‡¶≠
        function saveReadingProgress(storyId, progress) {
            const continueReading = JSON.parse(localStorage.getItem('continueReading')) || {};
            continueReading[storyId] = progress;
            localStorage.setItem('continueReading', JSON.stringify(continueReading));
            
            // Firebase-‡¶è ‡¶∏‡ßá‡¶≠ (‡¶Ø‡¶¶‡¶ø ‡¶•‡¶æ‡¶ï‡ßá)
            const user = getCurrentUser();
            if (database && user && user.uid) {
                database.ref('readingProgress/' + user.uid + '/' + storyId).set(progress);
            }
        }

        // ‡¶∂‡ßá‡¶∑ ‡¶™‡¶ú‡¶ø‡¶∂‡¶®‡ßá ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤
        function scrollToLastPosition(storyId) {
            const continueReading = JSON.parse(localStorage.getItem('continueReading')) || {};
            const progress = continueReading[storyId] || 0;
            
            const storyContent = document.getElementById('storyContent');
            if (storyContent) {
                const scrollHeight = storyContent.scrollHeight - storyContent.clientHeight;
                storyContent.scrollTop = (progress / 100) * scrollHeight;
            }
        }

        // ‡¶¨‡ßÅ‡¶ï‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï ‡¶´‡¶∞ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡¶ø
        function toggleBookmarkForStory(storyId) {
            const user = getCurrentUser();
            if (!user) {
                alert('‡¶¨‡ßÅ‡¶ï‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï ‡¶ï‡¶∞‡¶§‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!');
                showAuthPage();
                return;
            }
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarks')) || [];
            const index = bookmarks.indexOf(storyId);
            
            if (index > -1) {
                bookmarks.splice(index, 1);
                alert('‡¶¨‡ßÅ‡¶ï‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï ‡¶∏‡¶∞‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá!');
            } else {
                bookmarks.push(storyId);
                alert('‡¶ó‡¶≤‡ßç‡¶™ ‡¶¨‡ßÅ‡¶ï‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!');
            }
            
            localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
            
            // ‡¶¨‡¶æ‡¶ü‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
            const btn = document.querySelector('.bookmark-btn');
            if (btn) {
                if (index > -1) {
                    btn.classList.remove('active');
                } else {
                    btn.classList.add('active');
                }
            }
        }

        // ‡¶≤‡¶æ‡¶á‡¶ï ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        function likeStory(storyId) {
            const user = getCurrentUser();
            if (!user) {
                alert('‡¶≤‡¶æ‡¶á‡¶ï ‡¶¶‡¶ø‡¶§‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!');
                showAuthPage();
                return;
            }
            
            const stories = JSON.parse(localStorage.getItem('stories')) || [];
            const story = stories.find(s => s.id == storyId);
            
            if (!story) return;
            
            story.likes = (story.likes || 0) + 1;
            
            // LocalStorage ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
            const index = stories.findIndex(s => s.id == storyId);
            if (index > -1) {
                stories[index] = story;
                localStorage.setItem('stories', JSON.stringify(stories));
            }
            
            // Firebase-‡¶è ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
            if (database) {
                database.ref('stories/' + storyId).update({ 
                    likes: story.likes 
                });
            }
            
            alert('‡¶≤‡¶æ‡¶á‡¶ï ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!');
            
            // ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
            const likeBtn = document.querySelector('.btn-primary');
            if (likeBtn) {
                likeBtn.innerHTML = `<i class="fas fa-heart"></i> ‡¶≤‡¶æ‡¶á‡¶ï (${story.likes || 0})`;
            }
        }

        // ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        function shareStory(storyId) {
            const shareUrl = window.location.href.split('#')[0] + '#story=' + storyId;
            const story = (JSON.parse(localStorage.getItem('stories')) || []).find(s => s.id == storyId);
            
            const shareText = `"${story?.title || '‡¶ó‡¶≤‡ßç‡¶™'}" ‡¶™‡ßú‡ßÅ‡¶® ‡¶ó‡¶≤‡ßç‡¶™‡ßá‡¶∞ ‡¶ù‡ßÅ‡ßú‡¶ø‡¶§‡ßá: ${shareUrl}`;
            
            if (navigator.share) {
                navigator.share({
                    title: story?.title || '‡¶ó‡¶≤‡ßç‡¶™‡ßá‡¶∞ ‡¶ù‡ßÅ‡ßú‡¶ø',
                    text: shareText,
                    url: shareUrl
                });
            } else {
                navigator.clipboard.writeText(shareText)
                    .then(() => alert('‡¶ó‡¶≤‡ßç‡¶™‡ßá‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá! ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§'))
                    .catch(() => {
                        prompt('‡¶≤‡¶ø‡¶Ç‡¶ï‡¶ü‡¶ø ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®:', shareText);
                    });
            }
        }

        // ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡ßã‡¶°
        function loadComments(storyId) {
            if (database) {
                database.ref('comments/' + storyId).orderByChild('timestamp').limitToLast(20).once('value')
                    .then((snapshot) => {
                        const commentsList = document.getElementById('commentsList');
                        if (!commentsList) return;
                        
                        if (!snapshot.exists()) {
                            commentsList.innerHTML = '<p style="text-align: center; color: #888;">‡¶ï‡ßã‡¶®‡ßã ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶®‡ßá‡¶á</p>';
                            return;
                        }
                        
                        commentsList.innerHTML = '';
                        const comments = [];
                        snapshot.forEach((childSnapshot) => {
                            comments.push({
                                id: childSnapshot.key,
                                ...childSnapshot.val()
                            });
                        });
                        
                        comments.reverse().forEach(comment => {
                            const commentDiv = document.createElement('div');
                            commentDiv.className = 'comment';
                            commentDiv.innerHTML = `
                                <div style="display: flex; align-items: center; margin-bottom: 5px;">
                                    <div class="user-avatar" style="width: 30px; height: 30px; font-size: 14px;">
                                        ${comment.author ? comment.author.charAt(0).toUpperCase() : '?'}
                                    </div>
                                    <div>
                                        <strong>${comment.author || '‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ'}</strong> 
                                        <small style="color: #666;">(${comment.date || '‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶®‡ßá‡¶á'})</small>
                                    </div>
                                </div>
                                <p style="margin: 5px 0 0 40px;">${comment.text}</p>
                            `;
                            commentsList.appendChild(commentDiv);
                        });
                    })
                    .catch((error) => {
                        console.error("Error loading comments:", error);
                    });
            }
        }

        // ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßã‡¶∏‡ßç‡¶ü
        function postComment(storyId) {
            const user = getCurrentUser();
            if (!user) { 
                alert('‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!'); 
                showAuthPage();
                return; 
            }
            
            const commentText = document.getElementById('commentText').value;
            if (!commentText.trim()) { 
                alert('‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®!'); 
                return; 
            }
            
            const commentData = {
                text: commentText,
                author: user.displayName || user.name || user.email.split('@')[0],
                userId: user.uid || user.id,
                timestamp: Date.now(),
                date: new Date().toLocaleDateString('bn-BD')
            };
            
            // LocalStorage-‡¶è ‡¶∏‡ßá‡¶≠
            const stories = JSON.parse(localStorage.getItem('stories')) || [];
            const story = stories.find(s => s.id == storyId);
            if (story) {
                story.commentCount = (story.commentCount || 0) + 1;
                const index = stories.findIndex(s => s.id == storyId);
                if (index > -1) {
                    stories[index] = story;
                    localStorage.setItem('stories', JSON.stringify(stories));
                }
            }
            
            // Firebase-‡¶è ‡¶∏‡ßá‡¶≠
            if (database) {
                database.ref('comments/' + storyId).push(commentData)
                    .then(() => {
                        return database.ref('stories/' + storyId).update({ 
                            commentCount: story.commentCount 
                        });
                    })
                    .then(() => {
                        document.getElementById('commentText').value = '';
                        loadComments(storyId);
                        alert('‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá!');
                    })
                    .catch((error) => {
                        console.error("Error posting comment:", error);
                    });
            } else {
                document.getElementById('commentText').value = '';
                loadComments(storyId);
                alert('‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá!');
            }
        }

        // ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ó‡¶≤‡ßç‡¶™
        function filterStories(category) {
            if (category === 'all') {
                loadStories();
                
                // Active ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∏‡ßá‡¶ü
                document.querySelectorAll('.category-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                event.target.classList.add('active');
                return;
            }
            
            showLoader('storiesLoader');
            
            const stories = JSON.parse(localStorage.getItem('stories')) || [];
            const filteredStories = stories.filter(story => story.category === category);
            
            hideLoader('storiesLoader');
            displayAllStories(filteredStories);
            
            // Active ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∏‡ßá‡¶ü
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // ‡¶≤‡¶ó‡¶á‡¶® ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                alert('‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶è‡¶¨‡¶Ç ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®!');
                return;
            }
            
            // LocalStorage ‡¶•‡ßá‡¶ï‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                setCurrentUser(user);
                alert('‡¶≤‡¶ó‡¶á‡¶® ‡¶∏‡¶´‡¶≤!');
                showPage('home');
            } else {
                alert('‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¨‡¶æ ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶≠‡ßÅ‡¶≤!');
            }
        }

        // ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        function register() {
            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;
            const confirmPass = document.getElementById('regConfirmPass').value;
            
            if (!name || !email || !password) { 
                alert('‡¶∏‡¶¨ ‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®!'); 
                return; 
            }
            
            if (password.length < 6) {
                alert('‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ß¨ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞ ‡¶¶‡ßÄ‡¶∞‡ßç‡¶ò ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá!');
                return;
            }
            
            if (password !== confirmPass) { 
                alert('‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶Æ‡¶ø‡¶≤‡¶õ‡ßá ‡¶®‡¶æ!'); 
                return; 
            }
            
            // LocalStorage-‡¶è ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
            const users = JSON.parse(localStorage.getItem('users')) || [];
            
            // ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶Ü‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ
            if (users.find(u => u.email === email)) {
                alert('‡¶è‡¶á ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶°!');
                return;
            }
            
            const newUser = {
                id: 'user_' + Date.now(),
                name: name,
                email: email,
                password: password,
                isPremium: false,
                joined: Date.now(),
                uid: 'local_' + Date.now()
            };
            
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            setCurrentUser(newUser);
            
            alert('‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶∏‡¶´‡¶≤! ‡¶è‡¶ñ‡¶® ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡¶ø‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§');
            showPage('home');
        }

        // ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü
        function logout() { 
            localStorage.removeItem('currentUser');
            currentUser = null;
            alert('‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶∏‡¶´‡¶≤!');
            showPage('home');
            updateAuthLinks();
        }

        // ‡¶Ö‡¶• ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
        function updateAuthLinks() {
            const authLinks = document.getElementById('authLinks');
            const user = getCurrentUser();
            
            if (user) {
                const displayName = user.displayName || user.name || user.email.split('@')[0];
                const firstLetter = displayName.charAt(0).toUpperCase();
                
                authLinks.innerHTML = `
                    <span class="user-info">
                        <div class="user-avatar">${firstLetter}</div>
                        <span>${displayName}</span>
                    </span>
                    <a href="#" onclick="showPage('profile')"><i class="fas fa-user"></i> ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</a>
                    <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</a>
                `;
            } else {
                authLinks.innerHTML = `
                    <a href="#" onclick="showAuthPage()"><i class="fas fa-sign-in-alt"></i> ‡¶≤‡¶ó‡¶á‡¶®</a>
                    <a href="#" onclick="showAuthPage(); showRegisterForm();"><i class="fas fa-user-plus"></i> ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞</a>
                `;
            }
        }

        // ‡¶ó‡¶≤‡ßç‡¶™ ‡¶™‡¶æ‡¶¨‡¶≤‡¶ø‡¶∂
        function publishStory() {
            const user = getCurrentUser();
            if (!user) { 
                alert('‡¶ó‡¶≤‡ßç‡¶™ ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂ ‡¶ï‡¶∞‡¶§‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!'); 
                showAuthPage();
                return; 
            }
            
            const title = document.getElementById('storyTitle').value;
            const content = document.getElementById('storyContent').value;
            const category = document.getElementById('storyCategory').value;
            const tagsInput = document.getElementById('storyTags').value;
            
            if (!title || !content || !category) { 
                alert('‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ, ‡¶ó‡¶≤‡ßç‡¶™ ‡¶è‡¶¨‡¶Ç ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®!'); 
                return; 
            }
            
            if (content.length > 5000 && !user.isPremium) {
                alert('‡ß´‡ß¶‡ß¶‡ß¶+ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞‡ßá‡¶∞ ‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡¶ø‡¶ñ‡¶§‡ßá ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ ‡¶Ü‡¶™‡¶ó‡ßç‡¶∞‡ßá‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®!');
                showPage('payment');
                return;
            }
            
            const storyData = {
                id: 'story_' + Date.now(),
                title: title,
                content: content,
                author: user.name || user.displayName || user.email.split('@')[0],
                authorId: user.id || user.uid,
                category: category,
                tags: tagsInput.split(',').map(tag => tag.trim()).filter(tag => tag),
                likes: 0,
                views: 0,
                commentCount: 0,
                timestamp: Date.now(),
                date: new Date().toLocaleDateString('bn-BD'),
                isPremium: user.isPremium || false
            };
            
            // LocalStorage-‡¶è ‡¶∏‡ßá‡¶≠
            const stories = JSON.parse(localStorage.getItem('stories')) || [];
            stories.push(storyData);
            localStorage.setItem('stories', JSON.stringify(stories));
            
            // Firebase-‡¶è ‡¶∏‡ßá‡¶≠
            if (database) {
                database.ref('stories/' + storyData.id).set(storyData);
            }
            
            alert('‡¶ó‡¶≤‡ßç‡¶™ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂‡¶ø‡¶§ ‡¶π‡ßü‡ßá‡¶õ‡ßá! ‡¶∏‡¶¨ ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá‡•§');
            
            // ‡¶´‡¶∞‡ßç‡¶Æ ‡¶ï‡ßç‡¶≤‡¶ø‡ßü‡¶æ‡¶∞
            document.getElementById('storyTitle').value = '';
            document.getElementById('storyContent').value = '';
            document.getElementById('storyCategory').value = '';
            document.getElementById('storyTags').value = '';
            document.getElementById('charCount').textContent = '0';
            
            showPage('home');
            loadStories();
        }

        // ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∞‡ßá‡¶ï‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü
        function updateCharCount() {
            const content = document.getElementById('storyContent').value;
            const count = content.length;
            document.getElementById('charCount').textContent = count;
            const user = getCurrentUser();
            document.getElementById('charCount').style.color = (count > 5000 && (!user || !user.isPremium)) ? 'red' : (count > 4000 ? 'orange' : 'green');
        }

        // ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶≤‡ßã‡¶°
        function loadProfile() {
            const user = getCurrentUser();
            if (!user) { 
                showAuthPage(); 
                return; 
            }
            
            const stories = JSON.parse(localStorage.getItem('stories')) || [];
            const userStories = stories.filter(story => story.authorId === user.id || story.authorId === user.uid);
            
            const container = document.getElementById('profileContent');
            const displayName = user.name || user.displayName || user.email.split('@')[0];
            const firstLetter = displayName.charAt(0).toUpperCase();
            
            container.innerHTML = `
                <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 20px;">
                    <div>
                        <div style="background: white; padding: 15px; border-radius: 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.1); text-align: center;">
                            <div class="user-avatar" style="width: 100px; height: 100px; font-size: 40px; margin: 0 auto 15px;">
                                ${firstLetter}
                            </div>
                            <h3>${displayName}</h3>
                            <p>${user.email}</p>
                            <div style="margin: 15px 0; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                <h4><i class="fas fa-crown"></i> ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</h4>
                                <div style="font-size: 24px; color: ${user.isPremium ? '#FFD700' : '#666'}; margin: 5px 0;">
                                    ${user.isPremium ? '‚≠ê ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ' : 'üÜì ‡¶´‡ßç‡¶∞‡ßÄ'}
                                </div>
                                ${!user.isPremium ? `
                                    <button class="btn-success" onclick="showPage('payment')" style="width: 100%; margin-top: 10px;">
                                        <i class="fas fa-crown"></i> ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ ‡¶Ü‡¶™‡¶ó‡ßç‡¶∞‡ßá‡¶°
                                    </button>
                                ` : ''}
                            </div>
                            <div style="margin: 15px 0; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                <h4><i class="fas fa-chart-bar"></i> ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶ø‡¶∏‡¶ü‡¶ø‡¶ï‡ßç‡¶∏</h4>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                                    <div>
                                        <div style="font-size: 24px; color: #667eea; font-weight: bold;">${userStories.length}</div>
                                        <div style="font-size: 12px; color: #666;">‡¶ó‡¶≤‡ßç‡¶™</div>
                                    </div>
                                    <div>
                                        <div style="font-size: 24px; color: #28a745; font-weight: bold;">
                                            ${userStories.reduce((sum, story) => sum + (story.likes || 0), 0)}
                                        </div>
                                        <div style="font-size: 12px; color: #666;">‡¶≤‡¶æ‡¶á‡¶ï</div>
                                    </div>
                                </div>
                            </div>
                            <button class="btn-primary" onclick="showPage('write')" style="width: 100%; margin-bottom: 10px;">
                                <i class="fas fa-pen"></i> ‡¶®‡¶§‡ßÅ‡¶® ‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®
                            </button>
                            <button class="btn-secondary" onclick="logout()" style="width: 100%;">
                                <i class="fas fa-sign-out-alt"></i> ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü
                            </button>
                        </div>
                    </div>
                    <div>
                        <div style="background: white; padding: 15px; border-radius: 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.1); margin-bottom: 15px;">
                            <h3><i class="fas fa-book"></i> ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ó‡¶≤‡ßç‡¶™‡¶∏‡¶Æ‡ßÇ‡¶π (${userStories.length})</h3>
                            ${userStories.length > 0 ? 
                                `<div style="margin-top: 10px;">
                                    ${userStories.slice(0, 10).map(story => `
                                        <div style="padding: 12px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center;">
                                            <div style="flex: 1;">
                                                <a href="#" onclick="viewStory('${story.id}')" style="text-decoration: none; color: #333; font-size: 16px;">
                                                    <strong>${story.title}</strong>
                                                </a>
                                                <div style="font-size: 12px; color: #666; margin-top: 5px;">
                                                    ${story.date} | ‚ù§Ô∏è ${story.likes} | üëÅÔ∏è ${story.views} | üí¨ ${story.commentCount || 0}
                                                </div>
                                            </div>
                                            <div>
                                                <span class="tag ${story.category === '‡¶≠‡ßÇ‡¶§‡ßá‡¶∞ ‡¶ó‡¶≤‡ßç‡¶™' ? 'ghost' : ''}">
                                                    ${story.category}
                                                </span>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>` : 
                                `<div style="text-align: center; padding: 30px; color: #666;">
                                    <i class="fas fa-book-open" style="font-size: 50px; margin-bottom: 20px; opacity: 0.3;"></i>
                                    <h4>‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡ßá‡¶ñ‡ßá‡¶®‡¶®‡¶ø</h4>
                                    <p>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶ó‡¶≤‡ßç‡¶™‡¶ü‡¶ø ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶¨‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                                    <button class="btn-primary" onclick="showPage('write')" style="margin-top: 15px;">
                                        ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®
                                    </button>
                                </div>`
                            }
                        </div>
                        
                        <div style="background: white; padding: 15px; border-radius: 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.1);">
                            <h3><i class="fas fa-bookmark"></i> ‡¶¨‡ßÅ‡¶ï‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶ó‡¶≤‡ßç‡¶™</h3>
                            <div id="bookmarkedStories" style="margin-top: 10px;"></div>
                        </div>
                    </div>
                </div>
            `;
            
            // ‡¶¨‡ßÅ‡¶ï‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡ßã‡¶°
            loadBookmarkedStories();
        }

        // ‡¶¨‡ßÅ‡¶ï‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡ßã‡¶°
        function loadBookmarkedStories() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarks')) || [];
            const stories = JSON.parse(localStorage.getItem('stories')) || [];
            const bookmarkedStories = stories.filter(story => bookmarks.includes(story.id));
            
            const container = document.getElementById('bookmarkedStories');
            if (!container) return;
            
            if (bookmarkedStories.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: #666;">
                        <i class="fas fa-bookmark" style="font-size: 30px; margin-bottom: 10px; opacity: 0.3;"></i>
                        <p>‡¶ï‡ßã‡¶®‡ßã ‡¶ó‡¶≤‡ßç‡¶™ ‡¶¨‡ßÅ‡¶ï‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡¶®‡¶ø</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = `
                <div class="stories-grid" style="grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));">
                    ${bookmarkedStories.slice(0, 6).map(story => `
                        <div class="story-card" onclick="viewStory('${story.id}')">
                            <div class="story-img ${story.category === '‡¶≠‡ßÇ‡¶§‡ßá‡¶∞ ‡¶ó‡¶≤‡ßç‡¶™' ? 'story-ghost' : ''}"></div>
                            <div class="story-content">
                                <h4 style="margin: 0 0 5px 0; font-size: 14px;">${story.title}</h4>
                                <div class="story-meta">
                                    <small><i class="fas fa-user"></i> ${story.author}</small>
                                    <small><i class="fas fa-heart"></i> ${story.likes}</small>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤
        function scrollToSection(sectionId) { 
            showPage('home'); 
            setTimeout(() => { 
                const section = document.getElementById(sectionId);
                if (section) section.scrollIntoView({behavior: 'smooth'}); 
            }, 100); 
        }

        // ‡¶Ü‡¶∞‡ßã ‡¶ó‡¶≤‡ßç‡¶™ ‡¶≤‡ßã‡¶°
        function loadMoreStories() {
            loadStories();
        }

        // ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ
        function selectPackage(packageType) {
            selectedPackage = packageType;
            document.getElementById('paymentMethods').style.display = 'block';
            document.getElementById('paymentRequest').style.display = 'none';
            document.querySelectorAll('.payment-method').forEach(method => {
                method.classList.remove('active');
            });
        }

        function selectPaymentMethod(method) {
            selectedPaymentMethod = method;
            document.querySelectorAll('.payment-method').forEach(m => {
                m.classList.remove('active');
            });
            event.target.closest('.payment-method').classList.add('active');
            
            // ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶∂‡ßã
            showPaymentRequest();
        }

        function showPaymentRequest() {
            if (!selectedPackage || !selectedPaymentMethod) {
                alert('‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶è‡¶¨‡¶Ç ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßá‡¶•‡¶° ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®!');
                return;
            }
            
            currentTransactionId = 'TXN' + Date.now() + Math.random().toString(36).substr(2, 5).toUpperCase();
            
            const packageNames = {
                'text': '‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶Ü‡¶®‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü‡ßá‡¶°',
                'audio': '‡¶Ö‡¶°‡¶ø‡¶ì ‡ßß ‡¶ò‡¶®‡ßç‡¶ü‡¶æ',
                'premium': '‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ+'
            };
            
            const packageAmounts = {
                'text': '‡ß≥ ‡ß´‡ß¶‡ß¶',
                'audio': '‡ß≥ ‡ß´‡ß¶‡ß¶',
                'premium': '‡ß≥ ‡ßÆ‡ß¶‡ß¶'
            };
            
            const methodNames = {
                'bkash': '‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂',
                'nagad': '‡¶®‡¶ó‡¶¶',
                'rocket': '‡¶∞‡¶ï‡ßá‡¶ü',
                'upay': '‡¶á‡¶â‡¶™‡ßá'
            };
            
            document.getElementById('transactionId').textContent = currentTransactionId;
            document.getElementById('paymentPackage').textContent = packageNames[selectedPackage];
            document.getElementById('paymentAmount').textContent = packageAmounts[selectedPackage];
            document.getElementById('paymentMethod').textContent = methodNames[selectedPaymentMethod];
            
            document.getElementById('paymentMethods').style.display = 'none';
            document.getElementById('paymentRequest').style.display = 'block';
        }

        function verifyPayment() {
            const referenceNumber = document.getElementById('referenceNumber').value;
            const userContact = document.getElementById('userContact').value;
            
            if (!referenceNumber) { 
                alert('‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶®!'); 
                return; 
            }
            
            if (!userContact) {
                alert('‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®!');
                return;
            }
            
            const user = getCurrentUser();
            if (user) {
                // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶ï‡ßá ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ ‡¶ï‡¶∞‡ßÅ‡¶®
                user.isPremium = true;
                setCurrentUser(user);
                
                // ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶∏‡ßá‡¶≠
                const paymentHistory = JSON.parse(localStorage.getItem('paymentHistory')) || [];
                paymentHistory.push({
                    transactionId: currentTransactionId,
                    package: selectedPackage,
                    amount: selectedPackage === 'premium' ? 800 : 500,
                    method: selectedPaymentMethod,
                    reference: referenceNumber,
                    userContact: userContact,
                    date: new Date().toLocaleString('bn-BD'),
                    userId: user.id || user.uid,
                    userName: user.name || user.displayName || user.email
                });
                localStorage.setItem('paymentHistory', JSON.stringify(paymentHistory));
                
                // Firebase-‡¶è ‡¶∏‡ßá‡¶≠
                if (database) {
                    database.ref('payments/' + currentTransactionId).set({
                        transactionId: currentTransactionId,
                        package: selectedPackage,
                        amount: selectedPackage === 'premium' ? 800 : 500,
                        method: selectedPaymentMethod,
                        reference: referenceNumber,
                        userContact: userContact,
                        date: Date.now(),
                        userId: user.id || user.uid,
                        userName: user.name || user.displayName || user.email,
                        status: 'completed'
                    });
                    
                    database.ref('users/' + (user.uid || user.id)).update({
                        isPremium: true,
                        premiumSince: Date.now(),
                        lastPayment: Date.now()
                    });
                }
            }
            
            document.getElementById('paymentStatus').innerHTML = `
                <div class="success">
                    <i class="fas fa-check-circle"></i> 
                    <h4>‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá!</h4>
                    <p>‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ID: <strong>${currentTransactionId}</strong></p>
                    <p>‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶æ‡¶á ‡¶ï‡¶∞‡ßá ‡ß®‡ß™ ‡¶ò‡¶®‡ßç‡¶ü‡¶æ‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ü‡¶™‡¶ó‡ßç‡¶∞‡ßá‡¶° ‡¶ï‡¶∞‡¶¨‡•§</p>
                    <p>‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶≤‡ßá ‡¶ï‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®: <strong>‡ß¶‡ßß‡ß©‡ß®‡ßÆ‡ßØ‡ß≠‡ß¨‡ß™‡ß¶‡ßÆ</strong></p>
                </div>
            `;
            
            // ‡ß´ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤‡ßá ‡¶∞‡¶ø‡¶°‡¶æ‡¶á‡¶∞‡ßá‡¶ï‡ßç‡¶ü
            setTimeout(() => { 
                showPage('profile'); 
            }, 5000);
        }

        // URL ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶ø‡¶Ç
        function handleURLHash() {
            const hash = window.location.hash;
            if (hash && hash.startsWith('#story=')) {
                const storyId = hash.replace('#story=', '');
                if (storyId) {
                    viewStory(storyId);
                }
            }
        }

        // ‡¶á‡¶®‡¶ø‡¶∂‡¶ø‡ßü‡¶æ‡¶≤‡¶æ‡¶á‡¶ú
        document.addEventListener('DOMContentLoaded', function() {
            updateAuthLinks();
            loadStories();
            handleURLHash();
            
            // URL ‡¶π‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶ö‡ßá‡¶û‡ßç‡¶ú ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞
            window.addEventListener('hashchange', handleURLHash);
            
            // Firebase ‡¶•‡ßá‡¶ï‡ßá ‡¶ó‡¶≤‡ßç‡¶™ ‡¶∏‡¶ø‡¶ô‡ßç‡¶ï (‡¶Ø‡¶¶‡¶ø ‡¶•‡¶æ‡¶ï‡ßá)
            if (database) {
                database.ref('stories').on('value', (snapshot) => {
                    if (snapshot.exists()) {
                        const firebaseStories = [];
                        snapshot.forEach((childSnapshot) => {
                            firebaseStories.push({
                                id: childSnapshot.key,
                                ...childSnapshot.val()
                            });
                        });
                        
                        // LocalStorage ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
                        localStorage.setItem('stories', JSON.stringify(firebaseStories));
                        
                        // UI ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
                        displayAllStories(firebaseStories.reverse());
                        
                        // ‡¶ü‡ßç‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶ó‡¶≤‡ßç‡¶™
                        const trending = [...firebaseStories].sort((a,b) => (b.likes || 0) - (a.likes || 0)).slice(0, 4);
                        displayTrendingStories(trending);
                    }
                });
            }
        });
    </script>
</body>
</html>